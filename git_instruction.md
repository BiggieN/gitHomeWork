# Инструкция по работе с системой контроля версий Git

## Общая информация и установка

### Общая информация

**Git** — распределённая система управления версиями. Предназначен для отслеживания и ведения истории изменения файлов, в вашем проекте. Чаще всего его используют для кода, но можно и для других файлов.

### Установка

Для начала работы необходимо установить **Git** с официального сайта. Для этого переходим на сайт *https://git-scm.com/downloads*. На этой странице имеются ссылки для установки **Git** на разных ОС. Выбираем Windows, после чего разрядность нашей ОС и скачиваем. Далее производим установку по умолчанию.

### Начальная конфигурация

Открываем консоль Windows и вводим следующие команды.

```
#Установим имя для вашего пользователя
#Вместо <ваше_имя> можно ввести, например, Grisha_Popov
#Кавычки оставляем
git config --global user.name "<ваше_имя>"

#Теперь установим email. Принцип тот же.
git config --global user.email "<адрес_почты@email.com>"
```

### Основные команды

* git init
* git status
* git add
* git commit -m "new message"
* git log
* git checkout
* git diff
* git branch
* git branch *<branch_name>*
* git checkout *<branch_name>*
* git branch -d *<branch_name>*
* git merge *<branch_name>*
* git clone
* git pull
* git push

### Работа с Git

Работа с **Git** происходит в консоли Windows.  Для этого открываем консоль, далее переходим в каталог, в котором будем работать командой *cd*.

Далее вводим команду **git init**. После этой команды в этом каталоге будет создан скрытый каталог *.git*, в котором будут хранится наши коммиты.

С помощью команды **git status** показывает статус файлов и какталогов в рабочем каталоге. С помощью этой команды можно увидеть, что необходимо добавить к коммиту.

Команда **git add** добавляет файлы к коммиту. Если файлы не были добавлены с помощью этой команды, они не будут добавлены в коммит, даже если были изменены.

Коммит производится с помощью команды **git commit**. Для того, чтобы добавить комментарий к коммиту необходимо добавить параметр **-m** и добавить текст в кавычках. Так же можно добавить параметр **-а**. Он аналогичен команде **git add** и добавляет в коммит все модифицированные файлы.

Просмотреть историю коммитов можно с помощью **git log**. Эта команда выводит все коммиты в упорядоченном виде с возможностью увидеть комментарий к коммиту.

Переключиться на какой-то коммит можно с помощью **git checkout**. В качестве параметра необходимо ввести номер коммита, который выводится командой **git log**. Вернуться к последнему состоянию можно этой же командой, но в качестве параметра указать название ветки, например *master*.

Команда **git diff** покажет отличия между коммитами или коммитом и текущим состоянием.

### Работа с ветвями

Важной частью работы с **Git** является ветвление. Ветви позволяют работать одновременно нескольким разработчикам параллельно не мешая друг другу. Для начала можно воспользоваться командой **git branch**. Эта команда выведет список созданных на текущий момент веток. Этот список будет состоять из одной ветки *master (main)* если ветви не создавались ранее или уже были слиты. 

Чтобы создать новую ветвь нужно воспользоваться командой **git branch *<branch_name>***. После ввода этой команды будет создана новая ветвь, но вы останетесь в текущей ветви.

Чтобы переключиться на вновь созданную ветвь нужно воспользоваться командой **git checkout *<branch_name>***. 
Когда работа в ветви будет завершена, нужно слить две ветви. Для начала, нужно закоммитить изменения командой **git commit -am "new message"**. После того, как изменения сохранены, нужно переключиться в ветвь, в которую нужно слить изменения. После этого, ввести команду **git merge *<branch_name>***, где в качестве ***<branch_name>*** нужно указать имя ветви которую сливают. После слияния ветвь удаляется автоматически.

Если же по какой-то причине мы решили, что изменения в новой ветви нам не нужны, то мы можем просто удалить эту ветвь. Для начала, нужно переключиться на другую ветвь. После этого мы вводим команду **git branch -d *<branch_name>***. Ветвь ***<branch_name>*** будет удалена.

### Ошибка слияния

В некоторых случаях может произойти конфликт слияния. Это может произойти при внесении правок в одном и том же месте в нескольких ветвях. В этом случае будет выведен диалог разрешения конфликта и место конфликта будет выделено цветом. Пример можно увидеть на изображении ниже.

![merge_conflict.png](/images/merge_conflict.png)

**Git** предложит следующие варианты разрешения конфликта:
- Оставить текущие изменения
- Принять входящие изменения
- Оставить оба варианта
- Сравнить изменения

После выбора варианта решения конфликта произойдет слияние, сливаемая ветка останется. Ее можно удалить вручную командой **git branch -d *<branch_name>***.

### Работа с удаленными репозиториями

Нередко, программисты могут работать на разных компьютерах. Чтобы постоянно не архивировать свой проект и таскать на флешке, можно воспользоваться различными сервисами хранения проектов. Один из таких сервисов - *github.com*. Для начала там необходимо зарегистрироваться. Потом создать новый репозиторий для хранения вашего проекта. Когда репозиторий будет создан, *github* покажет варианты работы с репозиторием. Для отправки вашего проекта в *github* нужно выполнить следующие команды:

**git remote add origin *<link_to_repository>***

Данная команда привязывает удаленный репозиторий к проекту.

**git branch -M main**

Данная команда переименовывает вашу ветку в main

**git push -u origin main**

С помощью этой команды мы отправляем наш репозиторий в *github.com*. При отправке в первый раз вас попросят залогиниться в *github*.

Чтобы скачать наш проект на другой компьютер необходимо воспользоваться командой **git clone *<link_to_repository>***, где мы указываем ссылку на наш репозиторий. Ссылку на репозиторий можно найти на странице репозитория. После выполнения команды на компьютере создается локальный репозиторий.

Все, что делается локально, остается локально до тех пор, пока вы не отправите изменения командой **git push *<link_to_repository>***. Это может создать проблему, когда вы что-то запушили на одном компьютере и пересели на другой. Изменения с другого компьютера не будут вам доступны. Чтобы это исправить, необходимо воспользоваться командой **git pull**. Эта команда получает изменения и пытается их слить с вашим локальным репозиторием.

### Pull Request

Программисты далеко не всегда работают со своими репозиториями. Нередко, они вносят изменения в чужие репозитории, например в основной репозиторий работодателя. Чтобы это сделать необходимо перейти в нужный репозиторий и нажать кнопку *fork*. Будет создана копия репозитория в вашем аккаунте. Далее, вы работаете с ней как со своим удаленным репозиторием. Когда же вы закончили работу и запушили изменения в ваш удаленный репозиторий появится кнопка ***"Compare and pull request"***. Нажав на эту кнопку мы отправим запрос на вливание ваших изменений в основной репозиторий. При этом у вас будет возможность ввести свой комментарий.